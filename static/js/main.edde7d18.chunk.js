(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2Io_U",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__lkrR0"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3QgOd",Modal:"Modal_Modal__2iHUx"}},18:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__V_a77"}},19:function(e,t,a){e.exports={message:"Notification_message__1CQjm"}},20:function(e,t,a){e.exports={Button:"LoadMore_Button__2YfU6"}},29:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(3),s=a.n(o),l=(a(29),a(4)),i=a(5),u=a.n(i),m=a(16),j=a(9),b=a(17),h=a.n(b),p=a(13),g=a.n(p),d=a(10),f=a(11),O=a(23),y=a(21),_=a(14),v=a.n(_),x=document.querySelector("#modal-root"),I=function(e){Object(O.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).closeModal=function(t){console.log("close MODAL",Date.now()),"Escape"===t.code&&e.props.onClose(),t.target===t.currentTarget&&e.props.onClose()},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.closeModal)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.closeModal)}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt;return Object(o.createPortal)(Object(n.jsx)("div",{className:v.a.Overlay,onClick:this.closeModal,children:Object(n.jsx)("div",{className:v.a.Modal,children:Object(n.jsx)("img",{src:t,alt:a})})}),x)}}]),a}(r.Component);function S(e){var t=e.src,a=e.largeImageURL,c=e.alt,o=Object(r.useState)(!1),s=Object(l.a)(o,2),i=s[0],u=s[1],m=function(){u(!i)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{className:g.a.ImageGalleryItem,children:Object(n.jsx)("img",{src:t,alt:c,onClick:m,className:g.a.ImageGalleryItemImage})}),i&&Object(n.jsx)(I,{src:a,alt:c,onClose:m})]})}var w=a(18),k=a.n(w),M=a(19),N=a.n(M);var L=function(e){var t=e.message;return Object(n.jsx)("p",{className:N.a.message,children:t})},U=a(22),G=function(){function e(t){Object(d.a)(this,e),this.options=Object(U.a)({BASE_URL:"https://pixabay.com/api/",defaultOptions:"image_type=photo&orientation=horizontal",page:1,per_page:12,key:"19030678-ed1e5f4c74f32611df53e834e"},t)}return Object(f.a)(e,[{key:"getUrl",value:function(){var e=this.options,t=e.BASE_URL,a=e.defaultOptions,n=e.searchQuery,r=e.page,c=e.per_page,o=e.key;return"".concat(t,"?").concat(a,"&q=").concat(n,"&page=").concat(r,"&per_page=").concat(c,"&key=").concat(o)}},{key:"fetchImages",value:function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,this.options.page+=1,e.abrupt("return",a.json().then((function(e){return e.hits})));case 8:e.prev=8,e.t0=e.catch(0),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u041a\u0415\u0427",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getImages",value:function(e){e&&(this.options.searchQuery=e,this.options.page=1);var t=this.getUrl();return this.fetchImages(t)}}]),e}(),C=a(20),E=a.n(C);function R(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{type:"button",className:E.a.Button,onClick:function(){e.loadMore()},children:"Load More"})})}var F="idle",B="pending",Q="resolved",A="rejected",q=new G;function D(e){var t=e.searchQuery,a=Object(r.useState)(F),c=Object(l.a)(a,2),o=c[0],s=c[1],i=Object(r.useState)([]),b=Object(l.a)(i,2),p=b[0],g=b[1],d=Object(r.useRef)(0);return Object(r.useEffect)((function(){d.current=0,g([]),f(t)}),[t]),Object(r.useLayoutEffect)((function(){p.length&&(window.scrollTo({top:d.current,behavior:"smooth"}),d.current=document.documentElement.scrollHeight-document.querySelector("#searchbar").scrollHeight)}),[p]),F===o?Object(n.jsx)(L,{message:"Something went wrong \xaf\\_(\u30c4)_/\xaf"}):A!==o||p.length?Object(n.jsxs)(n.Fragment,{children:[B===o&&Object(n.jsx)(h.a,{type:"Rings",color:"#bfbfbf",className:"loader"}),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:k.a.ImageGallery,children:p.map((function(e){var t=e.id,a=e.webformatURL,r=e.largeImageURL,c=e.tags;return Object(n.jsx)(S,{src:a,largeImageURL:r,alt:c},t)}))}),Q===o&&Object(n.jsx)(R,{loadMore:f}),A===o&&Object(n.jsx)(L,{message:"There are no more images...."})]})]}):Object(n.jsx)(L,{message:"Nothing founded..."});function f(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(B),e.next=3,q.getImages(t).then((function(e){return e}));case 3:if((a=e.sent).length){e.next=7;break}return s(A),e.abrupt("return");case 7:g((function(e){return[].concat(Object(m.a)(e),Object(m.a)(a))})),s(Q);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}var H=a(15),J=(a(52),a(6)),T=a.n(J);function P(e){var t=e.onSubmit,a=Object(r.useState)(""),c=Object(l.a)(a,2),o=c[0],s=c[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{className:T.a.Searchbar,id:"searchbar",children:Object(n.jsxs)("form",{className:T.a.form,onSubmit:function(e){e.preventDefault();var a=o.trim();if(!a)return Object(H.b)("to finds some, needs type some"),void s("");t(a.toLowerCase())},children:[Object(n.jsx)("button",{type:"submit",className:T.a.button,children:Object(n.jsx)("span",{className:T.a.label,children:"Search"})}),Object(n.jsx)("input",{className:T.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){return s(e.target.value)},value:o})]})}),Object(n.jsx)(H.a,{})]})}function z(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(P,{onSubmit:c}),a&&Object(n.jsx)(D,{searchQuery:a})]})})}s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(z,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__PZa_t",form:"Searchbar_form__Jh-jl",button:"Searchbar_button__2HdUq",label:"Searchbar_label__2a5Xh",input:"Searchbar_input__2y6dM"}}},[[53,1,2]]]);
//# sourceMappingURL=main.edde7d18.chunk.js.map